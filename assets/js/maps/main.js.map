{"version":3,"sources":["main.js"],"names":["$","isIe","navigator","userAgent","indexOf","test","Modernizr","svgasimg","attr","this","replace","counterUp","delay","time","click","removeClass","addClass","number_regex","RegExp","sanitize_number","number","parseInt","create_bar","number_identifier","bar_identifier","count_percentage","previous_value","initial_value","text","triggered","setInterval","value","percentage","Math","round","parseFloat","css"],"mappings":"AAAAA,EAAE,WACA,GAAIC,IAAO,GAEPC,UAAUC,UAAUC,QAAQ,QAAU,IAAM,WAAWC,KAAKH,UAAUC,cACxEF,GAAO,KAGJK,UAAUC,UAAYN,IACzBD,EAAE,mBAAmBQ,KAAK,MAAO,WAC/B,MAAOR,GAAES,MAAMD,KAAK,OAAOE,QAAQ,OAAQ,UAI/CV,EAAE,YAAYW,WACZC,MAAO,GACPC,KAAM,MAGRb,EAAE,QAAQc,MAAM,WACdd,EAAE,QAAQe,YAAY,cAAcC,SAAS,6BAC7ChB,EAAE,cAAcgB,SAAS,cAG3BhB,EAAE,cAAcc,MAAM,WACpBd,EAAE,cAAcgB,SAAS,UACzBhB,EAAE,qBAAqBgB,SAAS,YAGlChB,EAAE,WAAWc,MAAM,WACjBd,EAAE,WAAWgB,SAAS,QACtBhB,EAAE,iBAAiBgB,SAAS,UAG9BhB,EAAE,iBAAiBc,MAAM,WACvBd,EAAE,iBAAiBe,YAAY,QAC/Bf,EAAE,gBAAgBgB,SAAS,SAG7B,IAAIC,GAAe,GAAIC,QAAO,MAE1BC,EAAkB,SAAUC,GAC9B,MAAOC,UAASD,EAAOV,QAAQO,EAAc,MAG3CK,EAAa,SAAUC,EAAmBC,EAAgBC,GAC5D,GACIC,GADAC,EAAgB3B,EAAEuB,GAAmBK,OAErCC,GAAY,CAEhBC,aAAY,WACY,MAAlBH,IACFA,EAAgB3B,EAAEuB,GAAmBK,OAGvC,IAAIG,GAAQ/B,EAAEuB,GAAmBK,MAEjC,IAAIG,IAAUJ,GAAkBE,EAAhC,CAIAA,GAAY,CAEZ,IAAIG,EAEAP,KACFO,EAAaC,KAAKC,MAAOf,EAAgBY,GAASZ,EAAgBQ,GAAkB,MAAQQ,WAAWnC,EAAEwB,GAAgBhB,KAAK,oBAAsB,MAGlJkB,IAAmBK,IACrBL,EAAiBK,EACjB/B,EAAEwB,GAAgBY,IAAI,UAAWX,EAAmBO,EAAaD,GAAS,QAE3E,KAGLT,GAAW,8CAA+C,6BAC1DA,EAAW,8BAA+B,aAC1CA,EAAW,+BAAgC,cAE3CA,EAAW,6BAA8B,2BAA2B,GACpEA,EAAW,yBAA0B,uBAAuB,GAC5DA,EAAW,yBAA0B,uBAAuB,GAC5DA,EAAW,0BAA2B,wBAAwB","file":"main.js","sourcesContent":["$(function () {\n  var isIe = false\n\n  if (navigator.userAgent.indexOf('MSIE') > -1 || /rv:11.0/i.test(navigator.userAgent)) {\n    isIe = true\n  }\n\n  if (!Modernizr.svgasimg || isIe) {\n    $('img[src*=\"svg\"]').attr('src', function () {\n      return $(this).attr('src').replace('.svg', '.png')\n    })\n  }\n\n  $('.counter').counterUp({\n    delay: 20,\n    time: 1000\n  })\n\n  $('.iss').click(function () {\n    $('.iss').removeClass('functional').addClass('houston_we_have_a_problem')\n    $('.explosion').addClass('detonate')\n  })\n\n  $('.butterfly').click(function () {\n    $('.butterfly').addClass('active')\n    $('.butterfly_shadow').addClass('active')\n  })\n\n  $('.orange').click(function () {\n    $('.orange').addClass('hide')\n    $('.orange_eaten').addClass('show')\n  })\n\n  $('.orange_eaten').click(function () {\n    $('.orange_eaten').removeClass('show')\n    $('.orange_gone').addClass('show')\n  })\n\n  var number_regex = new RegExp(/,/g)\n\n  var sanitize_number = function (number) {\n    return parseInt(number.replace(number_regex, ''))\n  }\n\n  var create_bar = function (number_identifier, bar_identifier, count_percentage) {\n    var initial_value = $(number_identifier).text()\n    var previous_value\n    var triggered = false\n\n    setInterval(function () {\n      if (initial_value === '0') {\n        initial_value = $(number_identifier).text()\n      }\n\n      var value = $(number_identifier).text()\n\n      if (value === initial_value && !triggered) {\n        return\n      }\n\n      triggered = true\n\n      var percentage\n\n      if (count_percentage) {\n        percentage = Math.round((sanitize_number(value) / sanitize_number(initial_value)) * 100) * (parseFloat($(bar_identifier).attr('data-percentage')) / 100)\n      }\n\n      if (previous_value !== value) {\n        previous_value = value\n        $(bar_identifier).css('height', (count_percentage ? percentage : value) + '%')\n      }\n    }, 100)\n  }\n\n  create_bar('.greenhouse_gas_emissions .numbers .counter', '.greenhouse_gas_emissions')\n  create_bar('.land_use .numbers .counter', '.land_use')\n  create_bar('.water_use .numbers .counter', '.water_use')\n\n  create_bar('.chicken .numbers .counter', '.chicken .stat .content', true)\n  create_bar('.pig .numbers .counter', '.pig .stat .content', true)\n  create_bar('.cow .numbers .counter', '.cow .stat .content', true)\n  create_bar('.lamb .numbers .counter', '.lamb .stat .content', true)\n})\n\n/*\n$(document).ready(function () {\n    var votes = null\n\n    $('#ja').click(function () {\n        socket.emit('vote', { vote: 'yes' })\n    })\n\n    $('#nej').click(function () {\n        socket.emit('vote', { vote: 'no' })\n    })\n\n    $('#kanske').click(function () {\n        socket.emit('vote', { vote: 'maybe'})\n    })\n\n    var displayDone = function () {\n      $('.votingarea').html('<h3>Tack för din röst!</h3>')\n    }\n\n    var displayError = function (error) {\n        $('.votingarea').html('<h3>Du har redan röstat!</h3>')\n    }\n\n    var displayResults = function () {\n        $('.totalVotes').html('<span class=\"glyphicon glyphicon-signal\"></span>  ' + totalVotes + ' röster')\n        var yesPercent = Math.floor(votes.yes / totalVotes * 100)\n        var noPercent = Math.floor(votes.no / totalVotes * 100)\n        var maybePercent = Math.floor(votes.maybe / totalVotes * 100)\n        yesPercent = (isNaN(yesPercent) ? 0 : yesPercent)\n        noPercent = (isNaN(noPercent) ? 0 : noPercent)\n        maybePercent = (isNaN(maybePercent) ? 0 : maybePercent)\n        $('.yes').css('height', yesPercent + '%')\n        $('.yes .procent').text(yesPercent + '%')\n        $('.no').css('height', noPercent + '%')\n        $('.no .procent').text(noPercent + '%')\n        $('.maybe').css('height', maybePercent + '%')\n        $('.maybe .procent').text(maybePercent + '%')\n    }\n\n    var socket = io.connect('https://voting.mjolken.se:443')\n\n    socket.on('initial', function (data) {\n        if (data.voted) {\n           displayDone()\n        }\n    })\n\n    socket.on('votes', function (data) {\n        votes = data\n        totalVotes = data.no + data.yes + data.maybe\n        displayResults()\n    })\n\n    socket.on('voteresult', function (data) {\n        $.cookie('hasVoted', true)\n        if (data.error) {\n            displayError()\n        } else {\n            displayDone()\n        }\n    })\n})\n*/\n\n"],"sourceRoot":"/source/"}